<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{{ restaurant.name }}</title>
</head>
<body>

<h1>{{ restaurant.name }}</h1>
<p>{{ restaurant.address }}</p>
<p>{{ restaurant.phone }}</p>
<p>{{ restaurant.category }}</p>

{% if avg_rating %}
<p>⭐ 평균 평점: {{ avg_rating }}</p>
{% endif %}

<hr>

<h2>리뷰 작성</h2>

{% if session.user_id %}
<form method="post" action="/restaurant/{{ restaurant.id }}/review">
    <input type="number" name="rating" min="1" max="5" required>
    <br><br>
    <textarea name="comment" required></textarea>
    <br><br>
    <button type="submit">등록</button>
</form>
{% else %}
<p><a href="/login">로그인</a> 후 리뷰 작성 가능</p>
{% endif %}

<hr>

<h2>리뷰 목록</h2>
{% for review in restaurant.reviews %}
<p>
    ⭐ {{ review.rating }} |
    {{ review.user.username }}<br>
    {{ review.comment }}
</p>
<hr>
{% else %}
<p>아직 리뷰가 없습니다.</p>
{% endfor %}

</body>
</html>